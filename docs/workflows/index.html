<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-workflows/workflows">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Workflows | High throughput and high performance computing without servers or clusters</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://prominence.cloud/web/docs/workflows/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Workflows | High throughput and high performance computing without servers or clusters"><meta data-rh="true" name="description" content="Types of workflows"><meta data-rh="true" property="og:description" content="Types of workflows"><link data-rh="true" rel="icon" href="/web/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://prominence.cloud/web/docs/workflows/"><link data-rh="true" rel="alternate" href="https://prominence.cloud/web/docs/workflows/" hreflang="en"><link data-rh="true" rel="alternate" href="https://prominence.cloud/web/docs/workflows/" hreflang="x-default"><link rel="stylesheet" href="/web/assets/css/styles.2b581d3f.css">
<link rel="preload" href="/web/assets/js/runtime~main.aeb97323.js" as="script">
<link rel="preload" href="/web/assets/js/main.44fdcd66.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/web/"><b class="navbar__title text--truncate">PROMINENCE</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/web/docs/introduction/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/web/docs/introduction/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/web/docs/containers/">Containers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Containers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/web/docs/jobs/running-jobs">Jobs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/web/docs/workflows/">Workflows</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/web/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Workflows</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Workflows</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-workflows">Types of workflows<a class="hash-link" href="#types-of-workflows" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="groups-of-jobs">Groups of jobs<a class="hash-link" href="#groups-of-jobs" title="Direct link to heading">​</a></h3><p>In some situations it can be useful to be able to manage a group of jobs as a single entity. In order to submit a group of indendepent jobs as a workflow the first step is to write a JSON description of the workflow. This is just a list of the definitions of the individual jobs, which can be created easily using <code>prominence create --dry-run</code>. The basic structure is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;test-workflow-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     {...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="directed-acyclic-graphs">Directed acyclic graphs<a class="hash-link" href="#directed-acyclic-graphs" title="Direct link to heading">​</a></h3><p>In order to submit a workflow the first step is to write a JSON description of the workflow. This is just a list of the definitions of the individual jobs, each of which can be created easily using <code>prominence create --dry-run</code>, along with the dependencies between them. Each dependency defines a parent and its children. The basic structure is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;test-workflow-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {...},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;parent_job&quot;: [&quot;child_job_1&quot;, ...],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each of the individual jobs must have defined names as these are used in order to define the dependencies. Dependencies between jobs are <em>abstract dependencies</em>, i.e. defined in terms of names of jobs. This is different to CWL, for example, where the dependencies arise due to input and output data or files required by each job.</p><p>It is important to note that the resources requirements for the individual jobs can be (and should be!) specified. This will mean that each step in a workflow will only use the resources it requires. Jobs within a single workflow can of course request very different resources, which makes it possible for workflows to have both HTC and HPC steps.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="job-factories">Job factories<a class="hash-link" href="#job-factories" title="Direct link to heading">​</a></h3><p>Job factories allow many similar jobs to be created from a single template. The following types of job factories are available:</p><ul><li><strong>parameter sweep</strong>: a set of jobs is created by sweeping one or more parameters through a range of values</li><li><strong>zip</strong>: a set of jobs is created from multiple lists, where the i-th job contains the i-th element from each list</li><li><strong>repeat</strong>: runs the same job multiple times</li></ul><p>If you want to carry out a parameter study using parameters generated externally, <strong>zip</strong> is the most appropriate factory type.</p><p>For <strong>parameter sweep</strong> and <strong>zip</strong> a set of jobs is created by substituting a range of values into a template job. Substitutions can be made in the command to be executed or the values obtained using environment variables.</p><p>When a workflow using job factory is submitted to PROMINENCE individual jobs will automatically be created. The job names will be of the form <code>&lt;workflow name&gt;/&lt;job name&gt;/&lt;id&gt;</code> where <code>&lt;id&gt;</code> is an integer.</p><p>A single workflow can contain multiple job factories applied to different jobs.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameter-sweep">Parameter sweep<a class="hash-link" href="#parameter-sweep" title="Direct link to heading">​</a></h4><p>In this case numeric values are generated from start and end points in addition to an increment provided by the user.</p><p>Here is an example fragment which would need to be included in a workflow description:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;factories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;parameterSweep&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;sweep&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;job-name&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;parameters&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;frame&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;start&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;end&quot;: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;step&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we specify the factory to be of type <code>parameterSweep</code>. The range of values used to create the jobs is defined in <code>parameters</code>. The name of the parameter is given by <code>name</code>. In this example the parameter <code>frame</code> is varied between the value <code>start</code> and at most <code>end</code> in increments of <code>step</code>. The factory is applied to
all jobs specified in <code>jobs</code>.</p><p>Jobs can obtain the value of the parameter through the use of substitutions or environment variables. If a job’s command was to include <code>$frame</code> or <code>${frame}</code>, this would be substituted by the appropriate value. An environment variable <code>PROMINENCE_PARAMETER_frame</code> would also be available to the job containing this value.</p><p>Additional parameters can be included in order to carry out multi-dimensional parameter sweeps. </p><p>If you wish to explicitly specify each value to be used, rather than specifying start and end values and a step, use a <code>zip</code> (described below) rather than a parametric sweep.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="zip">Zip<a class="hash-link" href="#zip" title="Direct link to heading">​</a></h4><p>A set of jobs is created by substituting a range of values into a template job. The values to be used are specified in the form of lists. If multiple parameters are provided, the i-th job is provided with the i-th element from each list. The name comes from Python’s <code>zip</code> function.</p><p>Here’s an example fragment which would need to be included in a workflow description:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;factories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;example&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;job-name&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;zip&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;parameters&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;start_value&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          0, 1, 2, 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;end_value&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          8, 9, 10, 11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we specify the factory to be of type <code>zip</code>. The range of values used to create the jobs is defined in <code>parameters</code>. The name of each parameter is given by <code>name</code> and a list of values for each parameter is provided. In this example 4 jobs would be created, with:</p><ul><li>start_value = 0, end_value = 8</li><li>start_value = 1, end_value = 9</li><li>start_value = 2, end_value = 10</li><li>start_value = 3, end_value = 11</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="repeat">Repeat<a class="hash-link" href="#repeat" title="Direct link to heading">​</a></h4><p>A set of identical jobs is created. The parameter <code>number</code> specifies the number of jobs to create from the template. Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;factories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;example&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;job-name&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;repeat&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;number&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here 10 instances of the job with name <code>example</code> will be created.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="job-factories-with-dependencies">Job factories with dependencies<a class="hash-link" href="#job-factories-with-dependencies" title="Direct link to heading">​</a></h3><p>Job factories can be applied to jobs in a directed acyclic graph. </p><p>In the example workflow description below we use a job factory to
run 3 <code>process</code> jobs, then once these have completed a <code>merge</code> job is run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;factory-dag-workflow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resources&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;nodes&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cpus&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;memory&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;disk&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;tasks&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;image&quot;: &quot;busybox&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;runtime&quot;: &quot;singularity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;cmd&quot;: &quot;echo $id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;process&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resources&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;nodes&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;cpus&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;memory&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;disk&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;tasks&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;image&quot;: &quot;busybox&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;runtime&quot;: &quot;singularity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;cmd&quot;: &quot;echo merge&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;merge&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;factories&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;processing&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;parameterSweep&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;jobs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;process&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;parameters&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;start&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;end&quot;: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;step&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;process&quot;: [&quot;merge&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="failures-and-retries">Failures and retries<a class="hash-link" href="#failures-and-retries" title="Direct link to heading">​</a></h2><p>There are in general two classes of errors resulting in failing jobs:</p><ul><li>Jobs which exited with an exit code of anything other than zero,</li><li>Jobs which failed due to infrastructure or network problems, or it was not possible to download input files or container images</li></ul><p>By default the number of retries is zero, which means that if a job fails the workflow will fail. Any jobs which depend on a failed job will not be attempted. If the number of retries is set to one or more, if an individual job fails it will be retried up to the specified number of times. To set a maximum number of retries, include <code>maximumRetries</code> in the workflow definition, e.g.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;policies&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;maximumRetries&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>rerun</code> command can be used to re-run any failed jobs in a workflow, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prominence rerun &lt;workflow id&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will retry jobs which had previously failed, and execute any dependencies which were not run previously due to the failed jobs. This command can be used multiple times if necessary.</p><p>When the <code>rerun</code> command is used a new workflow id will be returned. After re-running a workflow the new workflow id should be used for checking the status. The original workflow id will only report the original number
of succesful jobs.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/web/docs/jobs/inputs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Inputs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types-of-workflows" class="table-of-contents__link toc-highlight">Types of workflows</a><ul><li><a href="#groups-of-jobs" class="table-of-contents__link toc-highlight">Groups of jobs</a></li><li><a href="#directed-acyclic-graphs" class="table-of-contents__link toc-highlight">Directed acyclic graphs</a></li><li><a href="#job-factories" class="table-of-contents__link toc-highlight">Job factories</a></li><li><a href="#job-factories-with-dependencies" class="table-of-contents__link toc-highlight">Job factories with dependencies</a></li></ul></li><li><a href="#failures-and-retries" class="table-of-contents__link toc-highlight">Failures and retries</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://eosc.prominence.cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Access</a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/web/introduction/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/prominence-eosc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/web/assets/js/runtime~main.aeb97323.js"></script>
<script src="/web/assets/js/main.44fdcd66.js"></script>
</body>
</html>